<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Configure Kendo UI Grid for ASP.NET MVC for Ajax binding</title>
        <link rel="shortcut icon" href="/favicon.ico"/>
        <meta name="description" content="Kendo UI Grid for ASP.NET MVC makes Ajax requests upon paging, sorting, filtering or grouping once the Grid HtmlHelper extension is configured for Ajax binding.">
        <link href="/assets/css/kendo.common.min.css" rel="stylesheet" />
        <link href="/assets/css/styles.css" rel="stylesheet" />
        <link href="/assets/css/theme.css" rel="stylesheet" />
        <script src="/assets/js/jquery-1.10.2.js"></script>
        <script src="/assets/js/kendo.web.min.js"></script>
        <script src="/assets/js/prettify.js"></script>
        <script src="/assets/js/app.js"></script>
        
    </head>
    <body>

        <header id="page-header">
            <div id="logo-bar">
    <a href="/">
        <img alt="Kendo UI logo" class="logo" src="/assets/images/logo.png">
    </a>
</div>

        </header>

        <div id="page-top">
    <ul id="page-tabs">
        <li><a href="/">Home</a></li>
        
        <li><a href="/api/introduction">API Reference</a></li>
        
        
        <li class="active">Getting Started</li>
        
        
        <li><a href="/howto/add-charts-and-graphs-to-an-application">How Do I?</a></li>
        
        
        <li><a href="/tutorials/inheritance-with-kendoui">Tutorials</a></li>
        
    </ul>
    <div id="page-search">
          
    </div>
</div>
<div id="page-inner-content">
    <div id="page-nav">
        <div id="page-tree"></div>
        <script>
        $("#page-tree").kendoTreeView({
            dataSource: {
                transport: {
                    read: {
                        url: "/getting-started.json",
                        dataType: "json"
                    }
                },
                schema: {
                    model: {
                        id: "path",
                        children: "items",
                        hasChildren: "items"
                    }
                }
            },
            select: preventParentSelection,
            template: navigationTemplate("/"),
            dataBound: expandNavigation("getting-started/using-kendo-with/aspnet-mvc/helpers/grid/ajax-binding.html")
        });
        </script>
    </div>

    

    <div id="page-article">
        <article>
            <h1 id="ajax-binding">Ajax Binding</h1>

<h2 id="introduction">Introduction</h2>

<p>When configured for ajax binding Kendo UI Grid for ASP.NET MVC will make ajax requests when doing paging, sorting, filtering, grouping or saving data.</p>

<p>Ajax-bound mode has the following features:</p>
<ul>
  <li>The grid retrieves only the data (in JSON format) representing the current page. As a result only the grid is updated.</li>
  <li>All grid templates (column, detail) are executed client-side. They follow the <a href="/getting-started/framework/templates/overview">Kendo UI Template</a> definition rules and may contain embedded JavaScript code.</li>
</ul>

<h2 id="getting-started">Getting Started</h2>

<p>The following tutorial shows how to configure Kendo UI Grid for ASP.NET MVC to do ajax binding to the Northwind database (the Products table).</p>

<ol>
  <li>Create a new ASP.NET MVC 4 application (or Telerik UI for ASP.NET MVC application if you have installed the <a href="/getting-started/using-kendo-with/aspnet-mvc/introduction#kendo-ui-for-asp.net-mvc-visual-studio-extensions">Telerik UI for ASP.NET MVC Visual Studio Extensions</a>).
Name the application "KendoGridAjaxBinding". If you decided not to use the Telerik UI for ASP.NET MVC Visual Studio Extensions followe the steps from the <a href="/getting-started/using-kendo-with/aspnet-mvc/introduction">introduction</a> help topic in order
to add Telerik UI for ASP.NET MVC to the application.</li>
  <li>Add a new "Entity Framework Data Model". Right click the <code class="language-plaintext highlighter-rouge">~/Models</code> folder in the solution explorer and pick "Add -&gt;  New Item". Choose "Data -&gt; ADO.NET Entity Data Model" in the "Add New Item" dialog.
Name the model "Northwind.edmx" and click "Next". This will start the "Entity Data Model Wizard".
<img src="/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/images/grid-entity-data-model.png" alt="New entity data model" /></li>
  <li>Pick the "Generate from database" option and click "Next". Configure a connection to the Northwind database. Click "Next".
<img src="/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/images/grid-entity-data-model.png" alt="Choose the connection" /></li>
  <li>Choose the "Products" table from the "Which database objects do you want to include in your model?". Leave all other options as they are set by default. Click "Finish".
<img src="/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/images/grid-database-objects.png" alt="Choose the Products table" /></li>
  <li>
    <p>Open HomeController.cs and add a new action method which will return the Products as JSON. The grid will make ajax requests to this action.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ActionResult Products_Read()
{
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Add a new parameter of type <code class="language-plaintext highlighter-rouge">Kendo.Mvc.UI.DataSourceRequest</code> to the action. This parameter will contain the current grid request information - page, sort, group and filter.
Decorate that parameter with the <code class="language-plaintext highlighter-rouge">Kendo.Mvc.UI.DataSourceRequestAttribute</code>. That attribute will populate the <code class="language-plaintext highlighter-rouge">DataSourceRequest</code> object from the posted data. You need to import the <code class="language-plaintext highlighter-rouge">Kendo.Mvc.UI</code> namespace.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ActionResult Products_Read([DataSourceRequest]DataSourceRequest request)
{
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Use the <code class="language-plaintext highlighter-rouge">ToDataSourceResult</code> extension method to convert the Products to a <code class="language-plaintext highlighter-rouge">Kendo.Mvc.UI.DataSourceResult</code> object. That extension method will page, filter, sort or group your data using the information provided by the
<code class="language-plaintext highlighter-rouge">DataSourceRequest</code> object. To use the <code class="language-plaintext highlighter-rouge">ToDataSourceResult</code> extension method import the <code class="language-plaintext highlighter-rouge">Kendo.Mvc.Extensions</code> namespace.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ActionResult Products_Read([DataSourceRequest]DataSourceRequest request)
{
    using (var northwind = new NorthwindEntities())
    {
        IQueryable&lt;Product&gt; products = northwind.Products;
        DataSourceResult result = products.ToDataSourceResult(request);
    }
}
</code></pre></div>    </div>
  </li>
  <li>
    <p>Return the <code class="language-plaintext highlighter-rouge">DataSourceResult</code> as JSON. Now let"s configure Kendo UI Grid for ajax binding.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ActionResult Products_Read([DataSourceRequest]DataSourceRequest request)
{
    using (var northwind = new NorthwindEntities())
    {
        IQueryable&lt;Product&gt; products = northwind.Products;
        DataSourceResult result = products.ToDataSourceResult(request);
        return Json(result);
    }
}
</code></pre></div>    </div>
  </li>
  <li>In the view configure the grid to use the action method created in the previous steps.
    <ul>
      <li>
        <p>Index.aspx (ASPX)</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;%: Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.Product&gt;()
        .Name("grid")
        .DataSource(dataSource =&gt; dataSource // Configure the grid data source
            .Ajax() // Specify that ajax binding is used
            .Read(read =&gt; read.Action("Products_Read", "Home")) // Set the action method which will return the data in JSON format
         )
        .Columns(columns =&gt;
        {
            // Create a column bound to the ProductID property
            columns.Bound(product =&gt; product.ProductID);
            // Create a column bound to the ProductName property
            columns.Bound(product =&gt; product.ProductName);
            // Create a column bound to the UnitsInStock property
            columns.Bound(product =&gt; product.UnitsInStock);
        })
        .Pageable() // Enable paging
        .Sortable() // Enable sorting
  %&gt;
</code></pre></div>        </div>
      </li>
      <li>
        <p>Index.cshtml (Razor)</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  @(Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.Product&gt;()
        .Name("grid")
        .DataSource(dataSource =&gt; dataSource // Configure the grid data source
            .Ajax() // Specify that ajax binding is used
            .Read(read =&gt; read.Action("Products_Read", "Home")) // Set the action method which will return the data in JSON format
         )
        .Columns(columns =&gt;
        {
            // Create a column bound to the ProductID property
            columns.Bound(product =&gt; product.ProductID);
            // Create a column bound to the ProductName property
            columns.Bound(product =&gt; product.ProductName);
            // Create a column bound to the UnitsInStock property
            columns.Bound(product =&gt; product.UnitsInStock);
        })
        .Pageable() // Enable paging
        .Sortable() // Enable sorting
  )
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Build and run the application
<img src="/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/images/grid-bound-grid.png" alt="Final result" /></li>
</ol>

<p>The <code class="language-plaintext highlighter-rouge">ToDataSourceResult</code> method uses the <code class="language-plaintext highlighter-rouge">DataSourceRequest</code> parameter and LINQ expressions to page, sort, filter and group your data.
The JSON response of the action method will contain only a single page of data. The grid will be bound to that data.</p>

<blockquote>
  <p>If your data is <code class="language-plaintext highlighter-rouge">IQueryable&lt;T&gt;</code> returned by a LINQ-enabled provider (Entity Framework, LINQ to SQL, Telerik OpenAccess, NHibernate or other) the LINQ expressions
created by the <code class="language-plaintext highlighter-rouge">ToDataSourceResult</code> method will be converted to SQL and executed by the database server.</p>
</blockquote>

<h2 id="using-view-models">Using View Models</h2>

<p>Sometimes it is convenient to use view model objects instead of entities returned by Entity Framework. For example you may want to
avoid serializing all Entity Framework properties as JSON or prevent serialization exceptions caused by circular references.
This tutorial will show how to use view models and Kendo UI Grid for ASP.NET MVC.</p>

<ol>
  <li>Perform all steps from the previous tutorial.</li>
  <li>
    <p>Add a new class to the <code class="language-plaintext highlighter-rouge">~/Models</code> folder. Name it <code class="language-plaintext highlighter-rouge">ProductViewModel</code>.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> public class ProductViewModel
 {
     public int ProductID { get; set; }
     public string ProductName { get; set; }
     public short? UnitsInStock { get; set; }
 }
</code></pre></div>    </div>
  </li>
  <li>Modify the grid declaration and make it use <code class="language-plaintext highlighter-rouge">ProductViewModel</code> instead of <code class="language-plaintext highlighter-rouge">Product</code>.
    <ul>
      <li>
        <p>Index.aspx (ASPX)</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;%: Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.ProductViewModel&gt;()
        .Name("grid")
        .DataSource(dataSource =&gt; dataSource
            .Ajax()
            .Read(read =&gt; read.Action("Products_Read", "Home"))
         )
        .Columns(columns =&gt;
        {
            columns.Bound(product =&gt; product.ProductID);
            columns.Bound(product =&gt; product.ProductName);
            columns.Bound(product =&gt; product.UnitsInStock);
        })
        .Pageable()
        .Sortable()
  %&gt;
</code></pre></div>        </div>
      </li>
      <li>
        <p>Index.cshtml (Razor)</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  @(Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.ProductViewModel&gt;()
        .Name("grid")
        .DataSource(dataSource =&gt; dataSource
            .Ajax()
            .Read(read =&gt; read.Action("Products_Read", "Home"))
         )
        .Columns(columns =&gt;
        {
            columns.Bound(product =&gt; product.ProductID);
            columns.Bound(product =&gt; product.ProductName);
            columns.Bound(product =&gt; product.UnitsInStock);
        })
        .Pageable()
        .Sortable()
  )
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>Modify the <code class="language-plaintext highlighter-rouge">Products_Read</code> action method and use the <code class="language-plaintext highlighter-rouge">ToDataSourceResult</code> method overload which accepts a mapping lambda.</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     public ActionResult Products_Read([DataSourceRequest]DataSourceRequest request)
     {
         using (var northwind = new NorthwindEntities())
         {
             IQueryable&lt;Product&gt; products = northwind.Products;
             // Convert the Product entities to ProductViewModel instances
             DataSourceResult result = products.ToDataSourceResult(request, product =&gt; new ProductViewModel
                     {
                     ProductID = product.ProductID,
                     ProductName = product.ProductName,
                     UnitsInStock = product.UnitsInStock
                     });
             return Json(result);
         }
     }
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="pass-additional-data-to-the-action-method">Pass Additional Data to the Action Method</h2>

<p>To pass additional parameters to the action use the <code class="language-plaintext highlighter-rouge">Data</code> method. Provide the name of a JavaScript function which will return a JavaScript object with the additional data:</p>

<h3 id="example---add-the-additional-parameters-to-the-action-method">Example - add the additional parameters to the action method:</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public ActionResult Products_Read([DataSourceRequest]DataSourceRequest request, string firstName, string lastName)
{
    //Implementation omitted
}
</code></pre></div></div>

<h3 id="example---specify-the-javascript-function-which-returns-additional-data-aspx">Example - specify the JavaScript function which returns additional data (ASPX)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%: Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.Product&gt;()
      .Name("grid")
      .DataSource(dataSource =&gt; dataSource
          .Ajax()
          .Read(read =&gt; read
               .Action("Products_Read", "Home") // Set the action method which will return the data in JSON format
               .Data("productsReadData") // Specify the JavaScript function which will return the data
          )
      )
      .Columns(columns =&gt;
      {
          columns.Bound(product =&gt; product.ProductID);
          columns.Bound(product =&gt; product.ProductName);
          columns.Bound(product =&gt; product.UnitsInStock);
      })
      .Pageable()
      .Sortable()
%&gt;
&lt;script&gt;
function productsReadData() {
    return {
        firstName: "John",
        lastName: "Doe"
    };
}
&lt;/script&gt;
</code></pre></div></div>

<h3 id="example---specify-the-javascript-function-which-returns-additional-data-razor">Example - specify the JavaScript function which returns additional data (Razor)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@(Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.Product&gt;()
      .Name("grid")
      .DataSource(dataSource =&gt; dataSource
          .Ajax()
          .Read(read =&gt; read
               .Action("Products_Read", "Home") // Set the action method which will return the data in JSON format
               .Data("productsReadData") // Specify the JavaScript function which will return the data
          )
      )
      .Columns(columns =&gt;
      {
          columns.Bound(product =&gt; product.ProductID);
          columns.Bound(product =&gt; product.ProductName);
          columns.Bound(product =&gt; product.UnitsInStock);
      })
      .Pageable()
      .Sortable()
)
&lt;script&gt;
function productsReadData() {
    return {
        firstName: "John",
        lastName: "Doe"
    };
}
&lt;/script&gt;
</code></pre></div></div>

<h2 id="enable-client-data-processing-during-ajax-binding">Enable Client Data Processing during Ajax Binding</h2>

<p>By default the Kendo UI Grid for ASP.NET MVC will make an ajax request to the action method every time the user changes the page, sorts, filters or groups. This behavior
can be changed by disabling <code class="language-plaintext highlighter-rouge">ServerOperation</code>.</p>

<h3 id="example---enable-client-data-processing-aspx">Example - enable client data processing (ASPX)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;%: Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.Product&gt;()
      .Name("grid")
      .DataSource(dataSource =&gt; dataSource
          .Ajax()
          .Read(read =&gt; read
               .ServerOperation(false) // Paging, sorting, filtering and grouping will be done client-side
               .Action("Products_Read", "Home") // Set the action method which will return the data in JSON format
               .Data("productsReadData")
          )
      )
      .Columns(columns =&gt;
      {
          columns.Bound(product =&gt; product.ProductID);
          columns.Bound(product =&gt; product.ProductName);
          columns.Bound(product =&gt; product.UnitsInStock);
      })
      .Pageable()
      .Sortable()
%&gt;
</code></pre></div></div>

<h3 id="example---enable-client-data-processing-razor">Example - enable client data processing (Razor)</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@(Html.Kendo().Grid&lt;KendoGridAjaxBinding.Models.Product&gt;()
      .Name("grid")
      .DataSource(dataSource =&gt; dataSource
          .Ajax()
          .Read(read =&gt; read
               .ServerOperation(false) // Paging, sorting, filtering and grouping will be done client-side
               .Action("Products_Read", "Home") // Set the action method which will return the data in JSON format
               .Data("productsReadData")
          )
      )
      .Columns(columns =&gt;
      {
          columns.Bound(product =&gt; product.ProductID);
          columns.Bound(product =&gt; product.ProductName);
          columns.Bound(product =&gt; product.UnitsInStock);
      })
      .Pageable()
      .Sortable()
)
</code></pre></div></div>

        </article>
    </div>
</div>

<footer>
    <p>Copyright &copy; 2002-2014 Telerik Inc</p>
</footer>


    </body>
</html>

